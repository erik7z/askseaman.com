FROM node:14

RUN mkdir -p /client
WORKDIR /client

COPY package.json /client
COPY package-lock.json /client

RUN npm ic
COPY . /client

ARG REACT_APP_GRAPHQL_HOST
ARG REACT_APP_GRAPHQL_PORT
ENV REACT_APP_GRAPHQL_HOST $REACT_APP_GRAPHQL_HOST
ENV REACT_APP_GRAPHQL_PORT $REACT_APP_GRAPHQL_PORT

RUN echo $REACT_APP_GRAPHQL_HOST
RUN echo $REACT_APP_GRAPHQL_PORT

RUN npm run build
