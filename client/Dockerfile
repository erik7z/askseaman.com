FROM node:14

RUN mkdir -p /client
WORKDIR /client

COPY package*.json ./

RUN npm install

COPY . .

ARG REACT_APP_HOST_IP_ADDRESS
ENV REACT_APP_HOST_IP_ADDRESS $REACT_APP_HOST_IP_ADDRESS

ARG REACT_APP_GRAPHQL_PORT
ENV REACT_APP_GRAPHQL_PORT $REACT_APP_GRAPHQL_PORT


RUN npm run build